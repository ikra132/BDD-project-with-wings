<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Select Your Room </title>
    <link rel="stylesheet" href="select.css">
</head>
<body>
    <header>
        <div class="logo">üè† University Residence Portal</div>
        <button class="profile-btn" type="button" onclick="location.href='../index.html'" >Log out</button>
    </header>

    <main>
        <h1>Select Your Room from  pavion1 level 2</h1>
        <p>Choose from available accommodation for the upcoming semester</p>

        <div class="main-container">
            <!-- Sidebar for filters -->

            <form method="GET" action="section.php">
            <aside class="sidebar">
                <h3>choose the wing</h3>
                <button class="floor-btn" type="button" onclick="location.href='select1.html'">wing 1</button>
                <button class="floor-btn" type="button" onclick="location.href='../pavion2/select4.html'">wing 2</button>
                <button class="floor-btn" type="button" onclick="location.href='../pavion3/select7.html'">wing 3</button>
            </aside>

            <aside class="sidebar">
                <h3>Filter by Floor</h3>
                <button class="floor-btn" type="button" onclick="location.href='select1.html'">Level 1</button>
                <button class="floor-btn" type="button" onclick="location.href='select2.html'">Level 2</button>
                <button class="floor-btn" type="button" onclick="location.href='select3.html'">Level 3</button>
            </aside>
        </form>
        <div class="room-grid">
            <!-- Example Room Card -->
            <div class="room-card">
                <div class="room-header">
                    <h3>Room 009<h3>        
                    <span class="status available">Fully Available</span>
                </div>
                <ul class="features">
                    <li>East Hall, Level 2</li>
                    <li>double Room</li>
                </ul>
                <div class="actions">
                    <button class="details-btn">View Details</button>
                    <button class="select-btn">Select Room</button>
                </div>
            </div>

            
             
            <div class="room-card">
                <div class="room-header">
                    <h3>Room 010</h3>
                    <span class="status limited">Limited Slots</span>
                </div>
                <ul class="features">
                    <li>West Block, Level 3</li>
                    <li>Double Room</li>
                </ul>
                <div class="actions">
                    <button class="details-btn">View Details</button>
                    <button class="select-btn">Select Room</button>
                </div>
            </div>




            <div class="room-card">
                <div class="room-header">
                    <h3>Room 011</h3>
                    <span class="status limited">Limited Slots</span>
                </div>
                <ul class="features">
                    <li>West Block, Level 3</li>
                    <li>Double Room</li>
                </ul>
                <div class="actions">
                    <button class="details-btn">View Details</button>
                    <button class="select-btn">Select Room</button>
                </div>
            </div>



            <div class="room-card">
                <div class="room-header">
                    <h3>Room 012</h3>
                    <span class="status limited">Limited Slots</span>
                </div>
                <ul class="features">
                    <li>West Block, Level 3</li>
                    <li>Double Room</li>         
                </ul>
                <div class="actions">
                    <button class="details-btn">View Details</button>
                    <button class="select-btn">Select Room</button>
                </div>
            </div>



            <div class="room-card">
                <div class="room-header">
                    <h3>Room   013</h3>
                    <span class="status limited">Limited Slots</span>
                </div>
                <ul class="features">
                    <li>West Block, Level 3</li>
                    <li>Double Room</li>
                </ul>
                <div class="actions">
                    <button class="details-btn">View Details</button>
                    <button class="select-btn">Select Room</button>
                </div>
            </div>



            <div class="room-card">
                <div class="room-header">
                    <h3>Room 014</h3>
                    <span class="status limited">Limited Slots</span>
                </div>
                <ul class="features">
                    <li>West Block, Level 3</li>
                    <li>Double Room</li>
                </ul>
                <div class="actions">
                    <button class="details-btn">View Details</button>
                    <button class="select-btn">Select Room</button>
                </div>
            </div>



            <div class="room-card">
                <div class="room-header">
                    <h3>Room 015</h3>
                    <span class="status limited">Limited Slots</span>
                </div>
                <ul class="features">
                    <li>West Block, Level 3</li>
                    <li>Double Room</li>
                </ul>
                <div class="actions">
                    <button class="details-btn">View Details</button>
                    <button class="select-btn">Select Room</button>
                </div>
            </div>



            
            <div class="room-card">
                <div class="room-header">
                    <h3>Room 016</h3>
                    <span class="status limited">Limited Slots</span>
                </div>
                <ul class="features">
                    <li>West Block, Level 3</li>
                    <li>Double Room</li>
                </ul>
                <div class="actions">
                    <button class="details-btn">View Details</button>
                    <button class="select-btn">Select Room</button>
                </div>
            </div>
        


            
        </div>
        <script>
            document.addEventListener('DOMContentLoaded', function() {
                fetch('../backend/get_dashboard_data.php')
                    .then(response => response.json())
                    .then(data => {
                        // Update user info
                        document.getElementById('user-name').textContent = data.user_name;
                        
                        // Update room assignment info if exists
                        if (data.assignment) {
                            document.getElementById('room-info').innerHTML = `
                                <h3>Your Room</h3>
                                <p>${data.assignment.pavilion_name}, Floor ${data.assignment.floor_number}</p>
                                <p>Room ${data.assignment.room_number}</p>
                                <p>Assigned on: ${new Date(data.assignment.date_assigned).toLocaleDateString()}</p>
                            `;
                            
                            // Update roommates if any
                            if (data.roommates.length > 0) {
                                let roommatesHTML = '<h4>Roommates</h4><ul>';
                                data.roommates.forEach(roommate => {
                                    roommatesHTML += `<li>${roommate.full_name} (${roommate.field_of_study})</li>`;
                                });
                                roommatesHTML += '</ul>';
                                document.getElementById('roommates').innerHTML = roommatesHTML;
                            }
                        }
                    })
                    .catch(error => {
                        console.error('Error loading dashboard data:', error);
                    });
            });
            </script>
    </main>
</body>
</html>
